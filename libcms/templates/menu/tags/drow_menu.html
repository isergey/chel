{% load mptt_tags %}
{#<style type="text/css">#}
{#    ul.dropdown ul {#}
{#        visibility: hidden;#}
{#        position: absolute;#}
{#        top: 100%;#}
{#        left: 0;#}
{#        z-index: 598;#}
{#        width: 100%;#}
{#    }#}
{#</style>#}
{#<link href="/static/css/frontend/menu.css" media="all" rel="stylesheet" type="text/css" />#}
{#<link href="http://vremenno.net/examples/css-drop-down-menu/css/dropdown/themes/mtv.com/default.ultimate.css" media="all" rel="stylesheet" type="text/css" />#}

<style type="text/css">
    /*dropdown.css*/
ul.dropdown, u ul.dropdown li, ul.dropdown ul {
    /*list-style: none;*/
    margin: 0;
    /*padding: 0;*/
}

ul.dropdown {
    position: relative;
    z-index: 597;
    float: left;
}

ul.dropdown li {
    float: left;
    min-height: 1px;
    line-height: 1.3em;
    vertical-align: middle;
}

ul.dropdown li.hover, ul.dropdown li:hover {
    position: relative;
    z-index: 599;
    cursor: default;
}

ul.dropdown ul {
    visibility: hidden;
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 598;
    width: 918px;

}
ul.dropdown ul, ul.dropdown ul li{
    background: none;
}

ul.dropdown>li>ul {
    background-color: #FBFBFB;
    background-image: -moz-linear-gradient(top, white, #E7E7E7);
    background-image: -ms-linear-gradient(top, white, #E7E7E7);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(white), to(#E7E7E7));
    background-image: -webkit-linear-gradient(top, white, #E7E7E7);
    background-image: -o-linear-gradient(top, white, #E7E7E7);
    background-image: linear-gradient(top, white, #E7E7E7);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#ffffff', endColorstr = '#f5f5f5', GradientType = 0);
    border-left: 1px solid #DDD;
    border-right: 1px solid #DDD;
    border-bottom: 1px solid #DDD;
    -webkit-border-bottom-left-radius: 3px;
    -moz-border-bottom-left-radius: 3px;
    border-bottom-left-radius: 3px;
    -webkit-border-bottom-right-radius: 3px;
    -moz-border-bottom-right-radius: 3px;
    border-bottom-right-radius: 3px;
    -webkit-box-shadow: inset 0 1px 0 white;
    -moz-box-shadow: inset 0 1px 0 #ffffff;
    box-shadow: inset 0 1px 0 white;
}



ul.dropdown ul li {
    float: none;
}

ul.dropdown ul ul {
    top: 1px;
    left: 99%;
}

ul.dropdown li:hover > ul {
    visibility: visible;
}

    /*dropdown.linear.css*/
ul.dropdown-linear {
    width: 100%;
}

ul.dropdown-linear ul li {
    float: left;
}

ul.dropdown-linear li.hover,
ul.dropdown-linear li:hover {
    position: static;
}

ul.dropdown-linear ul ul {
    display: none !important;
}

    /*dropdown.linear.columnar.css*/
ul.dropdown-columnar ul li {
    position: static;
    /*width: 150px;*/
}

ul.dropdown-columnar ul ul {
    display: block !important;
    position: static;
    width: auto !important;
}

ul.dropdown-columnar ul ul li {
    float: none;
}

ul.dropdown-columnar ul ul ul {
    display: none;
}

ul.dropdown-columnar li.hover ul,
ul.dropdown-columnar li:hover ul {
    visibility: visible !important;
}

    /*ul.dropdown li {*/
    /*padding: 0 10px;*/
    /*background-color: transparent;*/
    /*color: #000;*/
    /*}*/

/*ul.dropdown li.hover,*/
/*ul.dropdown li:hover, ul.dropdown li.dir:hover {*/
    /*background-color: #ffffff;*/
    /*color: #000;*/
/*}*/

ul.dropdown>li:hover, ul.dropdown>li.dir:hover {
    background-color: #ffffff;
    color: #000;
}


ul.dropdown>li:hover {
    /*border-top: #d3d3d3 solid 2px;*/
    /*border-left: #d3d3d3 solid 2px;*/
    /*border-right: #d3d3d3 solid 2px;*/
}

    /*ul.dropdown a:link,*/
    /*ul.dropdown a:visited	{ color: #000; text-decoration: none; }*/
    /*ul.dropdown a:hover		{ color: #000; }*/
    /*ul.dropdown a:active	{ color: #ffa500; }*/

    /* -- level mark -- */

ul.dropdown ul {
    /*background-color: #ffffff;*/
    font-size: 12px;
    letter-spacing: normal;
}

ul.dropdown ul li {

}

ul.dropdown li.last ul li {
    float: right;
}

    /* -- level mark -- */

ul.dropdown ul ul {
    /*margin-top: 5px;*/
    text-transform: none;
    /*width: 20%;*/
}

ul.dropdown>li>ul>li {

    border-right: #c7c7c7 solid 1px;
    padding: 10px 10px;

}

ul.dropdown>li>ul>li:first-child {
    /*border-right: none;*/
    padding: 10px 10px 0 0;
}

ul.dropdown>li>ul>li:last-child {
    border-right: none;
    padding: 10px 0 0 10px;
}

ul.dropdown>li>ul>li>ul {
    /*border-right: none;*/
    padding: 10px 0 0 0;
}

ul.dropdown>li>ul>li>ul>li>a {
    padding-left: 10px;
    background: url("http://www.bl.uk/images/homepage/homepagesprite.png") no-repeat 0 -1158px !important;

}

ul.dropdown>li>ul>li>ul>li {
    padding: 5px 0 0 0;
}

ul.dropdown *.dir {
    /*padding-right: 30px;*/
    /*background-image: url(../../../../images/lwis.celebrity/nav-arrow-down.png);*/
    /*background-position: 100% 50%;*/
    /*background-repeat: no-repeat;*/
}

ul.dropdown ul *.dir {
    background-image: none;

}

    /*default.advanced.css*/
    /* -- Base style extension -- */

ul.dropdown li a {
    color: #333;
    display: block;
    /*padding: 0 5px;*/
}

    /* -- Base style override -- */

ul.dropdown li {
    padding: 0;
}

    /* -- Base style reinitiate: post-override activities -- */

ul.dropdown>li, ul.dropdown>li.dir {
    padding: 8px 15px;
}

ul.dropdown>li:first-child {
    padding: 8px 10px;
}

    /* -- Custom styles -- */

ul.dropdown ul>li>ul {
    /*padding-left: 20px;*/
}

ul.dropdown ul a {
    width: 140px;
}

ul.dropdown a {
    text-decoration: none;
}

ul.dropdown ul a:hover {
    color: #d11314;
}

ul.dropdown {
    /*background: #d12f23;*/
    /*text-align: center;*/
    /*width: 760px;*/
}

ul.dropdown>li, ul.dropdown>li.dir {
    /*background: #d12f23;*/

}

ul.dropdown>li>a {
    /*display: block;*/
    color: #ffffff;
    text-align: center;
    font-size: 14px;
    /*font-weight: bold;*/

}

ul.dropdown>li:hover>a {
    color: #252525;
}

ul.dropdown>li>ul>li>a {
    color: rgba(41, 42, 36, 0.90);
    font-size: 16px;
    padding: 5px 0 0 0;
    font-weight: bold;
}

ul.dropdown>li>ul>li>ul>li>a {
    color: rgba(41, 42, 36, 0.90);
    font-size: 13px;
    /*padding: 5px 0 0 0;*/
    /*font-weight: bold;*/
}

ul.dropdown>li>ul>li {
    /*padding-top: 10px;*/
}

ul.dropdown>li>ul {
    padding: 0 10px 10px;
}

ul.dropdown>li>ul>li{
    width: 162px;
    /*background: #0044cc;*/
}
ul.dropdown>li>ul>li:first-child, ul.dropdown>li>ul>li:last-child{
    width: 172px;
    /*background: #0044cc;*/
}
</style>

<ul class="items dropdown dropdown-linear dropdown-columnar">
    {% if nodes %}
        {% recursetree nodes %}
            {% if not node.is_leaf_node %}
                <li class="dir">
                    <a href="{{ node.item_title.url }}">{{ node.item_title }} </a>
                    <ul class="children">
                        {{ children }}
                    </ul>
                </li>
            {% else %}
                <li {% if path == node.item_title.url %} class="active" {% endif %}>
                    <a href="{{ node.item_title.url }}" {% if node.open_in_new %}
                       target="_blank" {% endif %}>{{ node.item_title.title }}</a>
                </li>
            {% endif %}
        {% endrecursetree %}
    {% endif %}
</ul>

<script type="text/javascript">
    var isWorked = false;
    $('ul.dropdown>li').bind('mouseenter', function () {
        var current = $(this).children('ul');
        current.hide();
//        alert(isWorked);
        if (isWorked == false) {
            current.delay(700).show(0);
        }
        else {
            current.show(0);
        }

        isWorked = true;
    });
    $('ul.dropdown>li>ul').bind('mouseleave', function () {
        setTimeout(al, 1000);
    });
    function al() {
        isWorked = false;
//        alert(isWorked);
    }
    $('ul.items').bind('mouseleave', function () {
        isWorked = false;
    });
    //    $('ul.dropdown>li').bind('mouseover',function (){
    ////        alert('wefwef');
    //        $('ul.dropdown>li>ul').hide();
    //        alert('over');
    //        $('ul.dropdown>li>ul').delay(1000).show(0);
    //    });
    //    $('ul.dropdown>li').bind('mouseleave',function (){
    //        alert('leav');
    //    });
    //    $('ul.dropdown li').bind('mouseleave',function (){
    ////        $('ul.dropdown li ul').hide();
    //        $('ul.dropdown li ul').show(100);
    ////        alert('dedwed');
    //    });
    //    $('ul.dropdown li ul').bind('mouseleave',function (){
    //        $(this).hide().delay(1000);
    ////        $('ul.dropdown li ul').hide();
    //    });
</script>


